(function(){window.Penny=window.Penny||{VERSION:"0.1.0",on:function(a,b,e){a.addEventListener?a.addEventListener(b,e):a.attachEvent("on"+b,function(){e.call(a)})},ready:function(a){"loading"!=document.readyState?a():document.addEventListener?document.addEventListener("DOMContentLoaded",a):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&a()})},forEach:function(a,b){var e=a.length;for(i=0;i<e;i++)b(a[i],i)},extend:function(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var e in arguments[b])arguments[b].hasOwnProperty(e)&&
(a[e]=arguments[b][e]);return a}}})();window.console||(window.console={log:function(a){},info:function(a){},warn:function(a){},error:function(a){}});
(function(){Penny.ready(function(){var a=function(a,k){if(!document.querySelector('script[src$="'+a+'"]')){var b=document.createElement("script");b.src=a;Penny.on(b,"load",k);document.querySelector("body").appendChild(b)}},b=function(a){if(a=a.getAttribute("data-options"))try{a=JSON.parse(a)}catch(b){console.error("Inline DocumentCloud embed options must be valid JSON. See https://www.documentcloud.org/help/publishing."),a={}}else a={};return a},e=function(){var a=document.querySelectorAll(".DC-embed");
Penny.forEach(a,function(a,e){var c;c=a.querySelector(".DC-embed-resource");var d,f;"A"===c.nodeName?d=c.getAttribute("href"):(d=c,c=document.createElement("A"),c.href=d);if(d=d&&d.match(/\/documents\/([A-Za-z0-9-]+)\.html\#document\/p([0-9]+)$/)){f=d[1];var g="/documents/"+f+".json";f={type:"page",host:c.host,path:g,documentSlug:f,pageNumber:d[2],resourceURL:c.protocol+"//"+c.host+g,embedOptions:{page:d[2]}}}else console.error("The DocumentCloud URL you're trying to embed doesn't look right. Please generate a new embed code.");
if(c=f){d=1;f="";switch(c.type){case "page":f=c.documentSlug+"-p"+c.pageNumber+"-i"+d}for(;document.getElementById(f);)f=f.replace(/-i[0-9]+$/,"-i"+d++);d=f;a.className="DC-embed-enhanced";a.setAttribute("data-resource-type",c.type);a.setAttribute("id",d);d=Penny.extend({},b(a),c.embedOptions,{container:"#"+d});DocumentCloud.embed.loadPage("//"+c.host+c.path,d)}else console.error("The DocumentCloud URL you're trying to embed doesn't look right. Please generate a new embed code.")})},g="../dist/page_embed.css",
h="../dist/page_embed.js";window.ENV&&ENV.config&&(g=ENV.config.stylePath||g,h=ENV.config.appPath||h);(function(a){if(!document.querySelector('link[href$="'+a+'"]')){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.media="screen";b.href=a;document.querySelector("head").appendChild(b)}})(g);window.DocumentCloud?e():a(h,e)})})();
